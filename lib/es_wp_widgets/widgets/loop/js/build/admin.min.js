!function(a){if("undefined"==typeof b){var b=function(a,b){this.__construct(a,b)},c=b.prototype,d=b;c.dom=null,c.options=null,c.watcher=null,c.is_initializing=!1,c.available_post_types=null,c.available_taxonomies=null,c.available_authors=null,c.available_post_statuses=null,c.data=null,c.str_data="",c.filters=null,c.post_type="post",c.custom_template_markup="",d.default_options={},c.__construct=function(b){var c=this;b=a(b),this.dom={},this.dom.widget=b,this.dom.form=this.dom.widget.find("form"),this.dom.dialog_parent=b.find(".widget-inside, .cfct-module-edit-form"),this.dom.container_loop=this.dom.form.find(".es-loop-container"),this.dom.container_loop_filters=this.dom.form.find(".es-loop-filters-container"),this.dom.btn_add_filter=this.dom.form.find(".es-loop-add-filter-btn"),this.dom.btn_custom_template_markup=this.dom.form.find(".es-custom-template-markup-btn"),this.dom.input_loop_data=this.dom.form.find(".es-loop-data"),this.dom.input_post_type=this.dom.form.find(".es-loop-post-type"),this.dom.input_custom_template_markup=this.dom.form.find(".es-loop-custom-template-markup"),this.available_post_types=new Array,this.available_taxonomies=new Array,this.available_authors=new Array,this.available_post_statuses=new Array,this.filters=new Array;var d=this.dom.input_loop_data.val();a.trim(d).length>0&&this.set_values(JSON.parse(_.unescape(d)),!1),this.set_custom_template_markup(this.dom.input_custom_template_markup.val(),!1),this.get_wp_data(),this.dom.btn_add_filter.click(function(a){a.preventDefault(),c.dialog("select_filter_type")}),this.dom.container_loop_filters.on("click",".es_loop_filter_edit_btn",function(b){b.preventDefault();var d=a(this),e=d.closest(".es_loop_filter");return c.dialog("configure_filter_"+e.data("type"),{filter:e}),!1}),this.dom.container_loop_filters.on("click",".es_loop_filter_remove_btn",function(b){b.preventDefault();var d=a(this),e=d.closest(".es_loop_filter");return c.remove_filter(e.index()),!1}),this.dom.btn_custom_template_markup.click(function(a){a.preventDefault(),c.dialog("configure_custom_template_markup")});var e=this.watcher=new ES_Widget_Options_Watcher(b);e.subscribe(".es-loop-paginated",function(){var b=a(this);b.is(":checked")?a(".es-loop-paginated-dependent").not(".es-loop-field-no-show").show():a(".es-loop-paginated-dependent").not(".es-loop-field-no-show").hide()}),e.subscribe(".es-loop-page-nums-or-text-links-page-numbers, .es-loop-page-nums-or-text-links-text-links",function(b,c){var d=a(this);d.is(":checked")&&"text-links"==c?a(".es-loop-page-nums-or-text-links-dependent").removeClass("es-loop-field-no-show").show():a(".es-loop-page-nums-or-text-links-dependent").addClass("es-loop-field-no-show").hide()}),e.subscribe(".es-loop-show-post-title",function(){var b=a(this);b.is(":checked")?a(".es-loop-show-post-title-dependency").show():a(".es-loop-show-post-title-dependency").hide()}),e.subscribe(".es-loop-show-featured-image",function(){var b=a(this);b.is(":checked")?a(".es-loop-show-featured-image-dependency").show():a(".es-loop-show-featured-image-dependency").hide()}),this.watcher.trigger_all(),e.subscribe(".es-loop-post-type",function(a,b){c.post_type=b,c.set_values(),c.test_incompatibilities()}),new ES_Widget_Advanced_Options(this.dom.form.find(".es-widget-form-advanced-options"),{auto_open:!0})},c.init=function(){this.is_initializing=!0;var a;for(var b in this.available_post_types)a=this.available_post_types[b],this.dom.input_post_type.append('<option value="'+a.name+'">'+a.label+"</option>");this.dom.input_post_type.val(this.post_type);var c;for(var b in this.filters)c=this.filters[b],this.add_filter(c);this.is_initializing=!1,this.set_values(),this.test_incompatibilities()},c.add_filter=function(b,c){var d=this.get_filter_template(b);if(c){var e=c.index();this.filters.splice(e,1),c.replaceWith(d)}else this.dom.container_loop_filters.append(d);this.is_initializing||(this.filters.push(a.extend({},b)),this.set_values())},c.remove_filter=function(a){confirm("Are you sure you want to remove this filter?")&&(this.filters.splice(a,1),this.dom.container_loop_filters.find(".es_loop_filter").eq(a).remove(),this.set_values())},c.get_wp_data=function(){var b=this,c={action:"es_widget_loop_get_wp_data",test:1};a.post(ajaxurl,c,function(a){b.available_taxonomies=a.taxonomies,b.available_authors=a.authors,b.available_post_types=a.post_types,b.available_post_statuses=a.post_statuses,b.init()})},c.get_filter_data_from_el=function(b){var c=b.index();return a.extend({},this.filters[c])},c.test_incompatibilities=function(){var b=this;this.dom.container_loop_filters.find(".es_loop_filter_incompatibility_warning").remove(),this.dom.container_loop_filters.find(".es_loop_filter").each(function(c,d){switch(d=a(d),d.data("type")){case"taxonomy":b.test_taxonomy_compatibility(d)}})},c.test_taxonomy_compatibility=function(b){var c=this.get_filter_data_from_el(b),d=this.available_taxonomies[c.taxonomy_name].post_types,e=!a.inArray(this.post_type,d);e||b.append('<div class="es_loop_filter_incompatibility_warning">Warning: This Taxonomy is not compatible with the currently-selected Post Type.</div>')},c.set_custom_template_markup=function(b,c){c="undefined"==typeof c?!0:!1,b=_.escape(b),this.custom_template_markup=b,c&&this.dom.input_custom_template_markup.val(b),a.trim(b).length>0?this.dom.form.find(".es_loop_custom_template_markup_indicator").show():this.dom.form.find(".es_loop_custom_template_markup_indicator").hide()},c.get_filter_template=function(b){var c=a('<div class="es_loop_filter clearfix"></div>');switch(a('<div class="es_loop_filter_controls"><a href="" class="es_loop_filter_edit_btn">Edit</a><a href="" class="es_loop_filter_remove_btn">Remove</a></div>').appendTo(c),c.attr("data-type",b.type),b.type){case"taxonomy":var d,e=b.taxonomy_name,f=b.taxonomy_label,g=b.filter_relationship,h=new Array;for(var i in b.selection)d=b.selection[i],h.push(d.name);var j=f+" - ";j+=h.join(", "),j.length>30&&(j=j.substring(0,50)+"..."),a('<div class="es_loop_filter_preview"><span class="es_loop_filter_preview_label">Taxonomy: </span>'+j+' <span class="es_loop_filter_relationship_preview"><span class="es_loop_filter_preview_label">Relationship: </span>'+g+"</span></div>").appendTo(c),c.attr("data-type","taxonomy"),c.attr("data-taxonomy_name",e),c.attr("data-taxonomy_label",f),c.attr("data-filter_relationship",g);break;case"author":var k,g=b.filter_relationship,l=new Array;for(var i in b.selection)k=b.selection[i],l.push(k.name);var j=l.join(", ");j.length>30&&(j=j.substring(0,50)+"..."),a('<div class="es_loop_filter_preview"><span class="es_loop_filter_preview_label">Author: </span>'+j+' <span class="es_loop_filter_relationship_preview"><span class="es_loop_filter_preview_label">Relationship: </span>'+g+"</span></div>").appendTo(c),c.attr("data-type","author"),c.attr("data-filter_relationship",g);break;case"post_id":var m,g=b.filter_relationship,n=new Array;for(var i in b.selection)m=b.selection[i],n.push(m.name);var j=n.join(", ");j.length>30&&(j=j.substring(0,50)+"..."),a('<div class="es_loop_filter_preview"><span class="es_loop_filter_preview_label">Post ID(s): </span>'+j+' <span class="es_loop_filter_relationship_preview"><span class="es_loop_filter_preview_label">Relationship: </span>'+g+"</span></div>").appendTo(c),c.attr("data-type","post_id"),c.attr("data-filter_relationship",g);break;case"post_status":var o,g=b.filter_relationship,p=new Array;for(var i in b.selection)o=b.selection[i],p.push(o.name);var j=p.join(", ");j.length>30&&(j=j.substring(0,50)+"..."),a('<div class="es_loop_filter_preview"><span class="es_loop_filter_preview_label">Post Status: </span>'+j+' <span class="es_loop_filter_relationship_preview"><span class="es_loop_filter_preview_label">Relationship: </span>'+g+"</span></div>").appendTo(c),c.attr("data-type","post_status"),c.attr("data-filter_relationship",g);break;case"date_range":var g=b.filter_relationship,q=b.from.length>0?b.from:"Any Date",r=b.to.length>0?b.to:"Any Date",j="<strong>From:</strong> "+_.escape(q)+" <strong>To:</strong> "+_.escape(r);a('<div class="es_loop_filter_preview"><span class="es_loop_filter_preview_label">Date Range: </span>'+j+' <!--<span class="es_loop_filter_relationship_preview"><span class="es_loop_filter_preview_label">Relationship: </span>'+g+"</span>--></div>").appendTo(c),c.attr("data-type","date_range"),c.attr("data-filter_relationship",g),c.attr("data-from",q),c.attr("data-to",r)}return c},c.dialog=function(b,c){var e=this;switch(c=c||{},b){case"select_filter_type":var f,g=a('<div class="es_dialog" title="Add Filter"><form><fieldset class="ui-helper-reset"><p>Choose the type of Filter you\'d like to add.</p><div class="es_filter_options"><a href="#" class="es_loop_filter_option" data-type="taxonomy"><span class="es_icon es_icon_taxonomy"><span class="es_icon_inner"></span></span><span class="es_loop_filter_option_label">Taxonomy</span></a><a href="#" class="es_loop_filter_option" data-type="author"><span class="es_icon es_icon_user"><span class="es_icon_inner"></span></span><span class="es_loop_filter_option_label">Author</span></a><a href="#" class="es_loop_filter_option" data-type="post_id"><span class="es_icon es_icon_numeric"><span class="es_icon_inner"></span></span><span class="es_loop_filter_option_label">Post ID</span></a><a href="#" class="es_loop_filter_option" data-type="post_status"><span class="es_icon es_icon_post_status"><span class="es_icon_inner"></span></span><span class="es_loop_filter_option_label">Post Status</span></a><a href="#" class="es_loop_filter_option" data-type="date_range"><span class="es_icon es_icon_calendar"><span class="es_icon_inner"></span></span><span class="es_loop_filter_option_label">Date Range</span></a></div></fieldset></form></div>').appendTo(document.body);g.find("a").click(function(b){b.preventDefault();var c=a(this),d=c.data("type");f.dialog("close"),e.dialog("configure_filter_"+d)});var h=function(){a(this).dialog("close")},i=function(){g.find("form")[0].reset(),g.remove()};g.find("form").submit(function(a){a.preventDefault()}),f=g.dialog({width:e.dom.dialog_parent.outerWidth(),height:e.dom.dialog_parent.outerHeight(),resizable:!1,autoOpen:!0,modal:!1,appendTo:e.dom.dialog_parent,buttons:{Cancel:h},close:i});break;case"configure_filter_taxonomy":var g=a('<div class="es_dialog es_loop_dialog" title="Configure Filter - Taxonomy"><form><fieldset class="ui-helper-reset"><p>Please Choose a Taxonomy</p><label>Taxonomies</label><br/><select class="es_taxonomy_select"><option value="_choose_one">Choose a Taxonomy...</option></select><div class="es_dynatree_container"></div><div class="es_tokenized_input_container"></div><p class="es_loop_filter_relationship_wrapper"><span class="es-widget-form-top-label">Filter Relationship</span><label class="es-widget-form-check-radio-label"><input type="radio" name="filter_relationship" value="IN" /> IN</label> <label class="es-widget-form-check-radio-label"><input type="radio" name="filter_relationship" value="NOT IN" />NOT IN</label> <label class="es-widget-form-check-radio-label"><input type="radio" name="filter_relationship" value="AND" />And</label></p></fieldset></form>').appendTo(document.body),j=g.find(".es_taxonomy_select"),k=g.find(".es_tokenized_input_container"),l=g.find(".es_dynatree_container"),m=g.find(".es_loop_filter_relationship_wrapper"),n=function(){var b=j.val(),d=m.find("input:checked").val(),f=e.available_taxonomies;if("_choose_one"!=b||!f[b]){var h=f[b],i=b,n=a.trim(j.find(":selected").text());if(h.hierarchical){var o=l.find(".dynatree-selected a"),p=new Array;o.each(function(b,c){var d=a(c).attr("href").split("|"),e=d[0],f=d[1];p.push({id:e,name:f})})}else{var q=k.find("input.es_tokenized_input"),p=q.tokenInput("get");q.tokenInput("clear")}p.length>0&&(c.filter?e.add_filter({type:"taxonomy",taxonomy_name:i,taxonomy_label:n,filter_relationship:d,selection:p},c.filter):e.add_filter({type:"taxonomy",taxonomy_name:i,taxonomy_label:n,filter_relationship:d,selection:p}))}g.dialog("close")},h=function(){a(this).dialog("close")},o=function(){var b,f=e.available_taxonomies,g=0;for(var h in f)b=f[h],-1!==a.inArray(e.post_type,b.post_types)&&(j.append('<option value="'+b.name+'">'+b.label+"</option>"),g++);if(1>g&&(j.append('<option value="_no_choices" disabled="disabled">Sorry, there are no Taxonomies for this Post Type.</option>'),j.val("_choose_one")),j.change(function(){l.empty().hide(),k.empty().hide();var b=k.find("input.es_tokenized_input");b.length>0&&b.tokenInput("clear");var f=a(this).val();if("_choose_one"!=f){var g=e.available_taxonomies;if(g[f]){var h=g[f],i=a.extend(!0,new Array,h.terms);if(g[f].hierarchical){if(l.show(),m.show(),c.filter&&f==c.filter.data("taxonomy_name")){var j,n=e.get_filter_data_from_el(c.filter).selection;for(var o in i){j=i[o];for(var p in n)j.id==n[p].id&&(j.select=!0)}}var q=a("<p>Select one or more Terms in the Tree.</p>"),r=a('<div class="es_dynatree"></div>');q.appendTo(l),r.appendTo(l),r.dynatree({children:d.make_tree(i),clickFolderMode:2,checkbox:!0})}else{k.show(),m.show();var s=null;c.filter&&f==c.filter.data("taxonomy_name")&&(s=e.get_filter_data_from_el(c.filter).selection);var t=a("<p>Start typing a Term's name to select one or more Terms.</p>"),u=a('<input class="widefat es_tokenized_input" type="text" name="terms" />');t.appendTo(k),u.appendTo(k),u.tokenInput(i,{theme:"facebook",preventDuplicates:!0,prePopulate:s})}}}}),c.filter){var i=c.filter.data("taxonomy_name");j.find('option[value="'+i+'"]').length>0&&j.val(i),j.trigger("change")}if(c.filter&&c.filter.data("filter_relationship")){var n=c.filter.data("filter_relationship");m.find('input[value="'+n+'"]').prop("checked",!0)}else m.find('input[value="IN"]').prop("checked",!0)},i=function(){g.find("form")[0].reset(),g.remove()};g.find("form").submit(function(a){a.preventDefault(),n()}),g.dialog({autoOpen:!0,width:e.dom.dialog_parent.outerWidth(),height:e.dom.dialog_parent.outerHeight(),modal:!1,appendTo:e.dom.dialog_parent,buttons:{Add:function(){n()},Cancel:h},open:o,close:i});break;case"configure_filter_author":var g=a('<div class="es_dialog" title="Configure Filter - Author"><form><fieldset class="ui-helper-reset"><p>Start typing an Author\'s name below to choose one or more Authors.</p><label for="author">Authors</label><input class="widefat es_tokenized_input" type="text" name="author" /><p class="es_loop_filter_relationship_wrapper"><span class="es-widget-form-top-label">Filter Relationship</span><label class="es-widget-form-check-radio-label"><input type="radio" name="filter_relationship" value="IN" /> IN</label> <label class="es-widget-form-check-radio-label"><input type="radio" name="filter_relationship" value="NOT IN" />NOT IN</label></p></fieldset></form>').appendTo(document.body),m=g.find(".es_loop_filter_relationship_wrapper"),n=function(){var a=g.find("input.es_tokenized_input"),b=m.find("input:checked").val(),d=a.tokenInput("get");a.tokenInput("clear"),d.length>0&&(c.filter?e.add_filter({type:"author",filter_relationship:b,selection:d},c.filter):e.add_filter({type:"author",filter_relationship:b,selection:d})),g.dialog("close")},h=function(){a(this).dialog("close")},o=function(){m.show();var a=null;if(c.filter&&(a=e.get_filter_data_from_el(c.filter).selection),g.find("input.es_tokenized_input").tokenInput(e.available_authors,{theme:"facebook",preventDuplicates:!0,resultsFormatter:function(a){return"<li><div style='display: inline-block; padding-left: 10px;'><div class='full_name'>"+a.display_name+"</div><div class='email'>"+a.email+"</div></div></li>"},prePopulate:a}),c.filter&&c.filter.data("filter_relationship")){var b=c.filter.data("filter_relationship");m.find('input[value="'+b+'"]').prop("checked",!0)}else m.find('input[value="IN"]').prop("checked",!0)},i=function(){g.find("form")[0].reset(),g.remove()};g.find("form").submit(function(a){a.preventDefault(),n()}),g.dialog({autoOpen:!0,width:e.dom.dialog_parent.outerWidth(),height:e.dom.dialog_parent.outerHeight(),modal:!1,appendTo:e.dom.dialog_parent,buttons:{Add:function(){n()},Cancel:h},open:o,close:i});break;case"configure_filter_post_id":var g=a('<div class="es_dialog" title="Configure Filter - Post ID(s)"><form><fieldset class="ui-helper-reset"><p>Type the Post ID and hit enter for each Post that applies.</p><label>Post ID(s)</label><input class="widefat es_tokenized_input" type="text" name="post_ids" /><p class="es_loop_filter_relationship_wrapper"><span class="es-widget-form-top-label">Filter Relationship</span><label class="es-widget-form-check-radio-label"><input type="radio" name="filter_relationship" value="IN" /> IN</label> <label class="es-widget-form-check-radio-label"><input type="radio" name="filter_relationship" value="NOT IN" />NOT IN</label></p></fieldset></form>').appendTo(document.body),m=g.find(".es_loop_filter_relationship_wrapper"),n=function(){var a=g.find("input.es_tokenized_input"),b=m.find("input:checked").val(),d=a.tokenInput("get");a.tokenInput("clear"),d.length>0&&(c.filter?e.add_filter({type:"post_id",filter_relationship:b,selection:d},c.filter):e.add_filter({type:"post_id",filter_relationship:b,selection:d})),g.dialog("close")},h=function(){a(this).dialog("close")},o=function(){m.show();var a=null;if(c.filter&&(a=e.get_filter_data_from_el(c.filter).selection),g.find("input.es_tokenized_input").tokenInput(ajaxurl+"?action=es_widget_loop_get_post_id",{theme:"facebook",preventDuplicates:!0,prePopulate:a}),c.filter&&c.filter.data("filter_relationship")){var b=c.filter.data("filter_relationship");m.find('input[value="'+b+'"]').prop("checked",!0)}else m.find('input[value="IN"]').prop("checked",!0)},i=function(){g.find("form")[0].reset(),g.remove()};g.find("form").submit(function(a){a.preventDefault(),n()}),g.dialog({autoOpen:!0,width:e.dom.dialog_parent.outerWidth(),height:e.dom.dialog_parent.outerHeight(),modal:!1,appendTo:e.dom.dialog_parent,buttons:{Add:function(){n()},Cancel:h},open:o,close:i});break;case"configure_filter_post_status":var g=a('<div class="es_dialog" title="Configure Filter - Post Status"><form><fieldset class="ui-helper-reset"><p>Choose all Post Statuses that apply.</p><label for="ajax_url">Post Statuses</label><div class="es_loop_post_statuses_container"></div><p class="es_loop_filter_relationship_wrapper"><span class="es-widget-form-top-label">Filter Relationship</span><label class="es-widget-form-check-radio-label"><input type="radio" name="filter_relationship" value="IN" /> IN</label> <label class="es-widget-form-check-radio-label"><input type="radio" name="filter_relationship" value="NOT IN" />NOT IN</label></p></fieldset></form>').appendTo(document.body),m=g.find(".es_loop_filter_relationship_wrapper"),p=g.find(".es_loop_post_statuses_container");if(c.filter)var q=e.get_filter_data_from_el(c.filter).selection;var r,s;for(var t in this.available_post_statuses){if(r=this.available_post_statuses[t],s=a('<label><input type="checkbox" value="'+r.id+'" /> '+r.name+"</label>"),c.filter){var u=!1;for(var v in q)if(q[v].id==r.id){u=!0;break}u&&s.find("input").prop("checked",!0)}p.append(s)}var n=function(){var b=new Array,d=m.find("input:checked").val(),f=g.find(".es_loop_post_statuses_container input");f.each(function(c,d){d=a(d),d.is(":checked")&&b.push({id:d.val(),name:a.trim(d.closest("label").text())})}),b.length>0&&(c.filter?e.add_filter({type:"post_status",filter_relationship:d,selection:b},c.filter):e.add_filter({type:"post_status",filter_relationship:d,selection:b})),g.dialog("close")},h=function(){a(this).dialog("close")},i=function(){g.find("form")[0].reset(),g.remove()};if(g.find("form").submit(function(a){a.preventDefault(),n()}),g.dialog({autoOpen:!0,width:e.dom.dialog_parent.outerWidth(),height:e.dom.dialog_parent.outerHeight(),modal:!1,appendTo:e.dom.dialog_parent,buttons:{Add:function(){n()},Cancel:h},close:i}),c.filter&&c.filter.data("filter_relationship")){var w=c.filter.data("filter_relationship");m.find('input[value="'+w+'"]').prop("checked",!0)}else m.find('input[value="IN"]').prop("checked",!0);m.show();break;case"configure_filter_date_range":var g=a('<div class="es_dialog" title="Configure Filter - Date Range"><form><fieldset class="ui-helper-reset"><p>Choose a <strong>Date Range</strong> for your Posts</p><label for="from">From: </label><input tabindex="-1" type="text" name="from_date" /><a class="button es-widget-inline-form-field" href="">Clear</a><label for="to">To: </label><input tabindex="-1" type="text" name="to_date" /><a class="button es-widget-inline-form-field" href="">Clear</a><p>* Only one <strong>Date Range</strong> filter is supported per loop.</p></fieldset></form>').appendTo(document.body),n=function(){var b="IN";x=a.trim(g.find('input[name="from_date"]').val()),y=a.trim(g.find('input[name="to_date"]').val()),(x.length>0||y.length>0)&&(c.filter?e.add_filter({type:"date_range",filter_relationship:b,from:x,to:y},c.filter):e.add_filter({type:"date_range",filter_relationship:b,from:x,to:y})),g.dialog("close")},h=function(){a(this).dialog("close")},o=function(){var b=g.find("input");b.datepicker({changeMonth:!0,changeYear:!0,dateFormat:"yy-mm-dd"}),g.find("a").click(function(b){b.preventDefault(),a(this).prev("input").val("")})},i=function(){g.find("form")[0].reset(),g.remove()};if(g.find("form").submit(function(a){a.preventDefault(),n()}),g.dialog({autoOpen:!0,width:e.dom.dialog_parent.outerWidth(),height:e.dom.dialog_parent.outerHeight(),modal:!1,appendTo:e.dom.dialog_parent,buttons:{Add:function(){n()},Cancel:h},open:o,close:i}),c.filter){var x=c.filter.data("from"),y=c.filter.data("to");g.find('input[name="from_date"]').val(x),g.find('input[name="to_date"]').val(y)}break;case"configure_custom_template_markup":var z,g=a('<div class="es_dialog" title="Add Your Custom Template Code"><form><fieldset class="ui-helper-reset"><p>The editor below gives you the ability to create a Custom HTML Template for your Loop. Supported Merge Tags are as follows:</p><p>{{title}} - Post Title <br />{{featured_image}} - Post Featured Image (no alignment) <br />{{excerpt}} - Post Excerpt <br />{{content}} - Post Content</p><div class="es_raw_html_container"></div></fieldset></form></div>').appendTo(document.body),A=function(){var b=z.ace_editor.getValue();e.set_custom_template_markup(b),a(this).dialog("close")},h=function(){a(this).dialog("close")},o=function(){a(".ui-dialog :button").blur()},i=function(){g.find("form")[0].reset(),g.remove(),z.destroy()};g.find("form").submit(function(a){a.preventDefault(),A()}),g.dialog({width:e.dom.dialog_parent.outerWidth(),height:e.dom.dialog_parent.outerHeight(),resizable:!0,autoOpen:!0,modal:!1,appendTo:e.dom.dialog_parent,buttons:{Save:A,Cancel:h},open:o,close:i}),z=new ES_ACE_Code_Editor({element:g.find(".es_raw_html_container"),width:"100%",height:250,mode:"html",supported_modes:["html"],auto_focus:!1}),z.ace_editor.setValue(_.unescape(this.custom_template_markup))}},c.set_values=function(b,c){c="undefined"!=c||!0;var d={};b&&!_.isEmpty(b)?(d=a.extend({},b),this.filters=a.extend(new Array,b.filters),this.post_type=b.post_type):(d.post_type=this.post_type,d.filters=this.filters),this.data=d,this.str_data=_.escape(JSON.stringify(d)),c&&this.dom.input_loop_data.val(this.str_data)},d.make_tree=function(a){var b,c=new Array;for(var e in a)b=a[e],0==b.parent_id&&c.push(d.good_parenting(b,a));return c},d.good_parenting=function(a,b){var c,e={id:a.id,parent_id:a.parent_id,title:a.name,children:new Array,isFolder:!1,href:a.id+"|"+a.name,select:a.select||!1,expand:a.select||!1,addClass:"es_tree_term"};for(var f in b)c=b[f],a.id==c.parent_id&&(e.children.push(d.good_parenting(c,b)),e.isFolder=!0);return e}}window.ES_Loop=b}($);