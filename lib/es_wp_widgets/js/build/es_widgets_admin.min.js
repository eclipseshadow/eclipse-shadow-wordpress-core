"undefined"==typeof es_widgets_admin&&(es_widgets_admin={widget_callbacks:new Array,url_params:null,init:function(){jQuery("div.widgets-sortables").bind("sortstop",function(a,b){var c=b.item;jQuery.trim(c[0].id).length<1?jQuery(document).ajaxSuccess(function(a,b,d){d&&d.data&&d.data.search&&-1!=d.data.search("action=save-widget")&&es_widgets_admin.bind_widget_events(c)}):es_widgets_admin.bind_widget_events(c)}),jQuery(document).bind("es-widget-form-load",function(a,b){var c=jQuery("#"+b);es_widgets_admin.bind_widget_events(c)}),jQuery(document).ready(function(){jQuery(".widgets-sortables .widget").each(function(a,b){var c=jQuery(b);es_widgets_admin.bind_widget_events(c)})}),jQuery(document).ready(function(){jQuery(".widgets-sortables").on("click",".widget-control-save",function(){var a=jQuery('<div class="es_widget_saving_modal"><div class="es_widget_saving_indicator"></div></div>'),b=jQuery(this).closest(".widget").find(".widget-content");b.append(a),a.fadeIn(200)})}),jQuery(document).ready(function(){jQuery(".widgets-sortables").on("click",".es-widget-extra-options-link",function(a){a.preventDefault();var b=jQuery(this).siblings(".es-widget-extra-options"),c=jQuery(this).closest(".widget-inside");b.is(":visible")?(c.removeClass("es-widget-extra-options-visible"),b.slideUp()):(c.addClass("es-widget-extra-options-visible"),b.slideDown())})}),jQuery(document).ready(function(){jQuery(".widgets-sortables").on("click",'a[data-auto-save-on-unload="true"]',function(a){a.preventDefault();var b=jQuery(this),c=b.attr("href");jQuery(document).ajaxStop(function(){setTimeout(function(){window.location.href=c},1e3)}),b.closest(".widget").find(".widget-control-save").trigger("click")})}),jQuery(document).ready(function(){es_widgets_admin.url_params=es_widgets_admin.get_query_params(document.location.search),window.setTimeout(es_widgets_admin.run_url_command,1e3)})},bind_widget_events:function(a){var b=a.find(".es_widget_load_script");if(b.length<1||!0===b.data("events-bound"))return!1;b.data("events-bound",!0);var c=a.attr("id"),d=es_widgets_admin.get_id_base_from_id(c);if(null!=d&&es_widgets_admin.widget_callbacks[d]){var e=null;for(var f in es_widgets_admin.widget_callbacks[d])e=es_widgets_admin.widget_callbacks[d][f].callback,e.call(e,c)}},addWidgetLoadCallback:function(a,b){es_widgets_admin.widget_callbacks[a]||(es_widgets_admin.widget_callbacks[a]=new Array),es_widgets_admin.widget_callbacks[a].push({callback:b})},get_id_base_from_id:function(a){var b=a.match(/(widget-\d+_)([-_A-Za-z0-9]+)(\d+)/);return b&&4==b.length?(id_base=b[2],index_last_hyphen=id_base.lastIndexOf("-"),id_base=id_base.substring(0,index_last_hyphen)):null},get_query_params:function(a){a=a.split("+").join(" ");for(var b,c={},d=/[?&]?([^=]+)=([^&]*)/g;b=d.exec(a);)c[decodeURIComponent(b[1])]=decodeURIComponent(b[2]);return c},run_url_command:function(){try{switch(action=es_widgets_admin.url_params.es_wp_widget_action){case"edit_widget":var a=es_widgets_admin.url_params.es_wp_widget_id;es_widgets_admin.locate_and_scroll_to_widget(a)}}catch(b){console.log("ES Widgets Admin - Run URL Command Error",b)}},locate_and_scroll_to_widget:function(a){var b=jQuery("div[id*="+a+"]");if(!(b.length<1)){var c=b.find(".widget-inside").is(":visible"),d=b.closest(".widgets-sortables").is(":visible");0==c&&b.find("h4").first().trigger("click"),0==d&&b.closest(".widgets-holder-wrap").find(".sidebar-name").trigger("click");var e=b;jQuery("body").animate({scrollTop:e.offset().top-50},{duration:500,complete:function(){b.find(".widget-inside").effect("highlight",{duration:1e3}).effect("highlight",{duration:1e3})}})}}},jQuery(document).ready(function(){es_widgets_admin.init()}));